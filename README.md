# Spring MVC - Udemy course
To the Spring Framework Udemy Course by Neil Alishev

https://www.udemy.com/course/spring-alishev/learn/lecture/31011922

<h2>Lessons 45. Project # 1 "Library"</h2>

<h3>Creating database "project1"</h3>

    CREATE DATABASE project1;
    COMMENT ON DATABASE project1 is 'Project #1 ""Library""';

<h3>Creating tables "Person" and "Book"</h3>

    CREATE TABLE Person (					
        id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,				
        full_name varchar(100) UNIQUE NOT NULL,				
        year_of_birth int CHECK (year_of_birth >= 1900 AND year_of_birth <= 2022)				
    );

    ALTER TABLE Person ADD COLUMN email varchar(100) UNIQUE NOT NULL;					

    CREATE TABLE Book (					
        book_id  int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,				
        name varchar(100) NOT NULL,				
        author varchar(100) NOT NULL,				
        year int CHECK ( year>-10000 AND year < 2050),				
        person_id int REFERENCES Person(id) ON DELETE SET NULL				
    );					

<h3>Fill the tables with test data</h3>

    INSERT INTO Person (full_name, year_of_birth, email) VALUES ('Иванов Иван Иваныч', 1900, 'ivan@ya.ru');
    INSERT INTO Person (full_name, year_of_birth, email) VALUES ('Петров Пётр Петрович', 1970, 'petrov@yandex.ru');
    INSERT INTO Person (full_name, year_of_birth, email) VALUES ('Алексеев Алексей Алексеевич', 1989, 'aleksej@mail.ru');
    INSERT INTO Person (full_name, year_of_birth, email) VALUES ('Васильев Василий Васильевич', 1944, 'vassilij@mail.ru');
    INSERT INTO Person (full_name, year_of_birth, email) VALUES ('Николаев Николай Николавеич', 1985, 'kolya@mail.ru');
    
    SELECT * FROM Person;

    INSERT INTO Book (name, author, year) VALUES ('Над пропастью во ржи', 'Джером Селинджер', 1951);
    INSERT INTO Book (name, author, year) VALUES ('День опричника', 'Владимир Сорокин', 2006);
    INSERT INTO Book (name, author, year) VALUES ('Тайные виды на гору Фудзи', 'Виктор Пелевин', 2018);
    INSERT INTO Book (name, author, year) VALUES ('Философия Java', 'Брюс Эккель', 2018);
    INSERT INTO Book (name, author, year) VALUES ('Психопатология обыденной жизни', 'Зигмунд Фрейд', 1904);
    INSERT INTO Book (name, author, year) VALUES ('Игра в бисер', 'Герман Гессе', 1943);
    INSERT INTO Book (name, author, year) VALUES ('Бытиё и время', 'Мартин Хайдеггер', 1927);
    
    SELECT * FROM Book;

<h3>Special tasks</h3>

In case when a book is being read by a person,
the application shows, which person is reading the book.
In case when a book is available to be read, i.e. <b>person_id == null</b>,
there should be a message "The book is available to be read".
Also the application will provide selecting a person  which will
read the book from <b>popup list</b>.