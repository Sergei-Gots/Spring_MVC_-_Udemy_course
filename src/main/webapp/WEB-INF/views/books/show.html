<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book</title>
</head>
<h3>Book</h3>
<body>
    <p th:text="${book.getName()}">VALUE</p>
    <p th:text="${'Author: ' + book.getAuthor()}">VALUE</p>
    <p th:text="${'Year: ' + book.getYear()}">VALUE</p>

    <div th:if="${book.getPerson_id()==0}">
        <p th:if="${book.getPerson_id()==0}">This book is available</p>
        <form th:method="PATCH" th:action="@{/books/{id}/assign(id=${book.getId()})}">
            <label for="person">Select person:</label>
            <select th:object="${person}" th:field="*{id}" id="person">
                <option th:each ="person : ${people}"
                        th:value="${person.getId()}"
                        th:text="${person.getFull_name()}">
                </option>
            </select>
            <input type="submit" value="Assign owner"/>
        </form>
    </div>
    <div th:if="${book.getPerson_id()!=0}">
        <p th:text="${'This book is being read by: ' + owner.get().getFull_name()}">VALUE</p>
        <form th:method="PATCH" th:action="@{/books/{id}/release(id=${book.getId()})}">
            <input type="submit" value="Release book">
        </form>
    </div>
<br>
    <form th:method="GET" th:action="@{/books/{book_id}/edit(book_id=${book.getId()})}">
        <input type="submit" value="Edit"/>
    </form>
<br>
<br>
    <form th:method="DELETE" th:action="@{/books/{id}/(id=${book.getId()})}">
        <input type="submit" value="Delete"/>
    </form>
<hr>
<br>
    <a href="http://localhost:8080/books">All the books</a>
<br>
    <a href="http://localhost:8080/people">All the library members</a>

</body>
</html>